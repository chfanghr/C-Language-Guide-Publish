# Chapter23 共用体的定义和使用

&emsp;&emsp;在 C 语言中,允许几种不同类型的变量存放到同一段内存单元中,也就是使用覆盖技术,几个变量互相覆盖.这种几个不同的变量共同占用一段内存的结构,被称为共用体类型结构,简称共用体.一般定义形式为:
```C 
union 共用体名 
{ 
        数据类型 成员名 1; 
        数据类型 成员名 2; 
        ...
        数据类型 成员名 n; 
}变量名表列;
``` 
&emsp;&emsp;只有先定义了共用体变量,才能在后续的程序中引用它.不能直接引用共用体变量,而只能引用共用体变量中的成员.引用方法如下: 
```C
共用体变量名.成员名 
```
&emsp;&emsp;共用体类型数据具有以下特点: <br>
&emsp;&emsp;同一个内存段可以用来存放几种不同类型的成员,但是在每一瞬间只能存放其中的一种,而不是同时 存放几种.换句话说,每一瞬间只有一个成员起作用,其他的成员不起作用,即不是同时都存在 和起作用的. 
共用体变量中起作用的成员是最后一次存放的成员,在存入一个新成员后,原有成员就失去作用. 共用体变量的地址和它的各成员的地址都是同一地址.
* [example:src/Chapter23.c](../src/Chapter23.c)
```C
#include<stdio.h>
union INFO
{
        int a;
        int b;
        int c;
};
int main()
{
        union INFO A;
        A.a=1;
        A.b=2;
        A.c=3;
        printf("a:%d\n",A.a);
        printf("b:%d\n",A.b);
        printf("c:%d\n",A.c);
        return 0;
}
```
&emsp;&emsp;运行结果为：
```sh
$ ./a.out
a:3
b:3
c:3
```
&emsp;&emsp;不能对共用体变量名赋值,也不能企图引用变量名来得到一个值,并且,不能在定义共用体变量时对 它进行初始化.<br> 
&emsp;&emsp;不能把共用体变量作为函数参数, 也不能是函数返回共用体变量, 但可以使用指向共用体变量的指针. 共用体类型可以出现在结构体类型的定义中,也可以定义共用体数组.反之,结构体也可以出现在共 用体类型的定义中,数组也可以作为共用体的成员.